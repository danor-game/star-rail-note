import{c as d,s as h,_ as M,r as S,w as y,a as $,b as x,u as g,x as N,m as B,y as w,e as O,d as V,E as T,N as W,D as C,$ as E}from"./index-aSgyGGsL.js";const L={param:{type:String,default:null},label:{type:String,default:null},labelWidth:{type:String,default:null},labelAlign:{type:String,default:null},labelSplit:{type:String,default:"："},labelTextOnly:{type:Boolean,default:!1}},P=(e,c)=>{const l=d(()=>h(e.labelTextOnly)),s=d(()=>{const{label:t}=e,a=String(t);let n=[];return t&&a.trim()&&(n=l.value?[a.trim()]:a.split("|")),n}),r=d(()=>{const t=s.value[0],a=e.labelSplit;return t?`${t}${a}`:null}),v=d(()=>{const t=s.value[1],a=e.labelWidth;let n=null;return t&&String(t).trim()&&(n=String(t).trim()),a&&String(a).trim()&&(n=String(a).trim()),c.value&&(n=`calc(${n} - 1.5rem)`),n}),m=d(()=>{const t=s.value[2],a=e.labelAlign;let n="right";return t&&String(t).trim()&&(n=t),a&&String(a).trim()&&(n=a),n});return{$label:r,$labelWidth:v,$labelAlign:m}},Q=["checked"],Y=["disabled"],H={class:"inblock"},J=["placeholder","tabindex","type","readonly","disabled","min","max","step"],z={__name:"texter",props:{modelValue:{type:[String,Number,Boolean],default:""},disable:{type:Boolean,default:!1},text:{type:String,default:""},default:{type:[String,Number,Boolean],default:""},disabling:{type:[Boolean,String],default:!1},readonly:{type:[Boolean,String],default:!1},...L,place:{type:[Number,String],default:""},tab:{type:[Number,String],default:0},align:{type:String,default:null},type:{type:String,default:null},min:{type:[Number,String],default:null},max:{type:[Number,String],default:null},step:{type:[Number,String],default:null},focusSwitch:{type:Boolean,default:!1}},emits:["update:modelValue","update:disable","update:value"],setup(e,{emit:c}){const l=e,s=c,r=d(()=>h(l.disabling)),v=d(()=>h(l.readonly)),{$label:m,$labelWidth:t,$labelAlign:a}=P(l,r),n={text:"text",pass:"password",number:"number"},p=d(()=>n[l.type]||n.text),D=d(()=>({width:t.value,textAlign:a.value})),f=S(r.value&&l.modelValue===!1?l.default:l.modelValue),o=S(r.value?l.modelValue===!1:l.disable);y(()=>l.disable,u=>{r.value||(o.value=u)}),y(()=>l.modelValue,u=>{r.value?u===!1?o.value=!0:(o.value=!1,f.value=u):f.value=u}),y([f,o],([u,i],[b,I])=>{r.value?(u!=b&&s("update:value",u),i!=I&&s("update:disable",i),s("update:modelValue",i===!0?!1:p.value=="number"?Number(u):u)):s("update:modelValue",p.value=="number"?Number(u):u)});const A=u=>s("update:value",f.value+=u.deltaY>0?-1:1),k=S(null);return y(()=>l.focusSwitch,()=>k.value.focus()),(u,i)=>($(),x("comp-texter",null,[r.value?($(),x("p-disabling",{key:0,class:"inblock",checked:g(N)(!o.value),onClick:i[0]||(i[0]=b=>o.value=!o.value)},null,8,Q)):B("",!0),g(m)?($(),x("p-label",{key:1,disabled:g(N)(o.value),class:"inblock elli",style:w(D.value),onClick:i[1]||(i[1]=b=>r.value&&(o.value=!o.value))},O(g(m)),13,Y)):B("",!0),V("p-value",H,[T(V("input",{ref_key:"domInput",ref:k,"onUpdate:modelValue":i[2]||(i[2]=b=>f.value=b),style:w({textAlign:e.align}),placeholder:e.place,tabindex:e.tab,type:p.value,readonly:v.value,disabled:o.value,min:e.min,max:e.max,step:e.step,onMousewheel:i[3]||(i[3]=b=>p.value=="number"&&A)},null,44,J),[[W,f.value]])])]))}},q=M(z,[["__scopeId","data-v-be26c81c"]]),U=e=>localStorage.setItem("profiles",JSON.stringify(e)),F=()=>{let e;const c=localStorage.getItem("profiles");if(c!==null)try{if(e=JSON.parse(c),!(e instanceof Array))throw Error("数据类型不是数组")}catch(l){const s=`profiles-${C().format("YYMMDDHHmmss")}`;localStorage.setItem(`profiles-bad-${s}`,c),U(),E("读取档案",`${l}
● 数据已重置
● 旧数据已备份到localStorage.profiles-bad-${s}`)}return e??[]};export{q as T,P as a,F as l,L as p,U as s};
